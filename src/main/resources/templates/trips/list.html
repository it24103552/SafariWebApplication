<!-- src/main/resources/templates/trips/list.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Trips</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">
<h2>Trips</h2>
<form th:action="@{/trips}" method="post" class="row g-2 mb-3">
    <div class="col-3"><input class="form-control" name="title" placeholder="Title" required></div>
    <div class="col-3"><input class="form-control" type="datetime-local" name="startTime" required></div>
    <div class="col-3"><input class="form-control" type="datetime-local" name="endTime" required></div>
    <div class="col-2">
        <select class="form-select" name="vehicle.id" required>
            <option th:each="v:${vehicles}" th:value="${v.id}" th:text="${v.registrationNumber}"></option>
        </select>
    </div>
    <div class="col-2">
        <select class="form-select" name="guide.id" required>
            <option th:each="g:${guides}" th:value="${g.id}" th:text="${g.name}"></option>
        </select>
    </div>
    <div class="col-2">
        <select class="form-select" name="status">
            <option th:each="s:${statuses}" th:value="${s}" th:text="${s}"></option>
        </select>
    </div>
    <div class="col"><button class="btn btn-success">Add</button></div>
</form>
<table class="table table-striped">
    <thead><tr><th>ID</th><th>Title</th><th>Start</th><th>End</th><th>Vehicle</th><th>Guide</th><th>Status</th><th></th></tr></thead>
    <tbody>
    <tr th:each="t: ${trips}">
        <td th:text="${t.id}">1</td>
        <td th:text="${t.title}">Morning</td>
        <td th:text="${#temporals.format(t.startTime, 'yyyy-MM-dd HH:mm')}">-</td>
        <td th:text="${#temporals.format(t.endTime, 'yyyy-MM-dd HH:mm')}">-</td>
        <td th:text="${t.vehicle != null ? t.vehicle.registrationNumber : '-'}">-</td>
        <td th:text="${t.guide != null ? t.guide.name : '-'}">-</td>
        <td th:text="${t.status}">SCHEDULED</td>
        <td>
            <form th:action="@{'/trips/' + ${t.id} + '/delete'}" method="post">
                <button class="btn btn-sm btn-danger">Delete</button>
            </form>
        </td>
    </tr>
    </tbody>
</table>
<a class="btn btn-secondary" th:href="@{/dashboard}">Back</a>
</body>
</html>